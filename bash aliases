OS=`lowercase \`uname\``

[ "{$OS}" == "windowsnt" ] && OS_WIN="yes"
[ "{$OS}" == "darwin" ]    && OS_MAC="yes"
[ "{$OS}" == "linux" ]     && OS_LIN="yes"

# ls variants
alias la='ls -A' 
alias l='ls -alFtr' 
alias lsd='ls -d .*' 
alias ll='ls -alF'
[ -n OS_LIN ] && alias ls='ls --color=auto'
[ -n OS_MAC ] && alias ls='ls -G'

# Various
alias h='history | tail'
alias hg='history | grep'
alias mvi='mv -i' 
alias rmi='rm -i'

# One letter quickies:
alias p='pwd'
alias x='exit'
alias {ack,ak}='ack-grep'

# Directories
alias s='cd ..'

# Rails
alias src='script/rails console'
alias srs='script/rails server'
alias rgm='rails g model'
alias rgc='rails g controller'
alias rdc='rake db:drop db:create db:migrate db:seed' 
alias rrg='rake routes | grep '
alias rspecd='rspec --drb '

# git
alias {gsta,gst}='git status' 
# Warning: gst conflicts with gnu-smalltalk (when used).
alias {gbra,gb}='git branch'
alias {gco,go}='git checkout'
alias {gcob,gob}='git checkout -b '
alias {gadd,ga}='git add '
alias {gcom,gc}='git commit'
alias {gpul,gl}='git pull '
alias {gpus,gh}='git push '
alias glom='git pull origin master'
alias ghom='git push origin master'
alias gg='git grep '

# vim
alias v='vim'

# tmux
alias {ton,tn}='tmux set -g mode-mouse on'
alias {tof,tf}='tmux set -g mode-mouse off'

# linux libnotify
[ -n OS_LIN ] && alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

# linux ubuntu apt/aptitude
if [ -n OS_LIN ]; then 
  alias aptcs='apt-cache search'
  alias apti='sudo aptitude install'
  alias aptr='sudo aptitude remove'
  alias aptre='sudo aptitude reinstall'
  alias apts='sudo aptitude search'
  alias aptu='sudo aptitude update'
  alias aptuu='sudo aptitude update;sudo aptitude upgrade;'
fi

# mac ports
if [ -n OS_MAC ]; then
  alias bi='brew install'
  alias pi='sudo port install'
fi

# grep
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'

# ruby gems
alias gemi='sudo gem install'
alias gemre='sudo gem reinstall'
alias gems='sudo gem search'

# dns
alias {hostname2ip,h2ip}='dig +short'

# mac dhcp service
if [ -n OS_MAC ]; then
  alias {dhcpup,dhcp-start}='sudo /bin/launchctl load -w /System/Library/LaunchDaemons/bootps.plist'
  alias {dhcpdn,dhcp-stop}='sudo /bin/launchctl unload -w /System/Library/LaunchDaemons/bootps.plist'
fi

# wget
alias wgetncc='wget --no-check-certificate'

# utils
alias sitecopy='wget -k -K -E -r -l 10 -p -N -F -nH '
alias srall='sudo service nginx restart && sudo service php5-fpm restart && sudo service mysqld restart'
alias ytmp3='youtube-dl --extract-audio --audio-format mp3 '